# Лабораторная работа №5: Обмен данными по именованным каналам

Реализация многопоточного клиент-серверного приложения на C++ с использованием WinAPI. Программа демонстрирует синхронизацию процессов при доступе к общему файлу (задача "Читатели-Писатели").

## Условие задачи

**Тема:** Обмен данными по именованным каналам.
**Задача:** Написать программу для управления доступом параллельных процессов к файлу по именованным каналам.

### 1. Процесс-Server
Разработать процесс-сервер, который выполняет следующие действия:

**1.1.** Создает бинарный файл, записи которого имеют следующую структуру:
```cpp
struct employee
{
    int num;        // идентификационный номер сотрудника
    char name[10];  // имя сотрудника
    double hours;   // количество отработанных часов
};
```
Имя файла и данные о сотрудниках вводятся с консоли.

**1.2.** Выводит созданный файл на консоль.

**1.3.** Запускает процессы-клиенты `Client`, которые выполняют доступ к файлу по именованному каналу. Количество процессов клиентов вводится с консоли.

**1.4.** Обслуживает запросы процессов-клиентов следующим образом:
*   Если процесс-клиент запрашивает **модификацию** записи файла, то доступ к этой записи файла **блокируется** для других процессов-клиентов до завершения модификации записи клиентом.
*   Если процесс-клиент запрашивает **чтение** записи файла, то доступ к этой записи для других процессов-клиентов:
    *   **не блокируется**, если они также запрашивают доступ на чтение данных;
    *   **блокируется**, если они запрашивают доступ на запись данных.

**1.5.** После завершения работы всех процессов-клиентов выводит на консоль модифицированный файл.

**1.6.** По команде с консоли завершает свою работу.

### 2. Процесс-Client
Разработать процесс-клиент, который выполняет следующие действия:

**2.1.** Выполняет цикл:
1.  Запрашивает с консоли выполнение одной из операций:
    *   модификация записи файла;
    *   чтение записи;
    *   выход из цикла.
2.  После ввода требуемых данных выполняет эту операцию.

**2.2.** Доступ к записям файла осуществляется по ключу, которым является ID сотрудника.

**2.3.** При **модификации** записи процесс-клиент выполняет следующие действия:
1.  Запрашивает ключ записи.
2.  Посылает запрос на сервер.
3.  Выводит полученную с сервера запись на консоль.
4.  Запрашивает новые значения полей.
5.  По команде с консоли посылает измененную запись на сервер.
6.  По команде с консоли завершает доступ к записи.

**2.4.** При **чтении** записи процесс-клиент выполняет следующие действия:
1.  Запрашивает ключ записи.
2.  Посылает запрос на сервер.
3.  Выводит полученную с сервера запись на консоль.
4.  По команде с консоли завершает доступ к записи.

---

## Техническая реализация

*   **Язык:** C++17.
*   **Платформа:** Windows (WINAPI).
*   **Система сборки:** CMake

## Структура проекта

Решение состоит из трех проектов:
```text
Project Root
├── apps/
│   ├── client/       # Client: процесс клиент
│   ├── server/       # Server: процесс сервер
└── libs/
    ├── common.h/    # Общий заголовок, содержит структуры Request и Response для передачи данных по каналам
    ├── employee.h/    # Структура employee
    ├── process.h/    # Класс для управления процессами
    ├── thread.h/    # Класс для управления потоками
```

## Сборка и запуск

Для сборки проекта требуется CMake версии 3.24 или выше и компилятор с поддержкой C++17.

**Команды для сборки:**

```bash
mkdir build
cmake -B build
cmake --build build


